# gcc 7.2.1 enforces that some header files are actually compiled with -std=c++11,
# the libupnp skim for older versions in vlc collides with the one supplied
# by the library

source+=('vlc-2.2.8-cpp11.patch'
         'vlc-2.2.8-libupnp.patch')
sha512sums+=('0e186d64ffd0455e6ad1558ce509ce264eb03e2a0c7c2d7ef65e6aded4104a050d19c8f699c97cf31095198090f4e95bea4b4df1ae3a9075dc10e41e942c8993'
             '5736e5fc5d33c7b6c5c5664d26efb3b65b2a14202fe7c3892711c0bad02fd823c92724cb42e6efecf38a0cc446280097b92d910fc84d45b49c2a87c183d64f5e')

eval "$(
  declare -f prepare | \
    sed '
      /^}$/ i \
      patch -Np1 < "${srcdir}/vlc-2.2.8-cpp11.patch" \
      ./bootstrap \
      patch -Np1 < "${srcdir}/vlc-2.2.8-libupnp.patch"
    '
)"
